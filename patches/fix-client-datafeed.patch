From 981227c9487bf7cd0500563e29b697e3acc87ec9 Mon Sep 17 00:00:00 2001
From: Christopher Zimbizi <chriszimbizi@gmail.com>
Date: Thu, 15 Aug 2024 20:44:07 -0500
Subject: [PATCH 1/4] task 1: fix price calculation and ratio logic

---
 .gitignore |  1 +
 client3.py | 33 +++++++++++++++++++++------------
 2 files changed, 22 insertions(+), 12 deletions(-)
 create mode 100644 .gitignore

diff --git a/.gitignore b/.gitignore
new file mode 100644
index 0000000..f5e96db
--- /dev/null
+++ b/.gitignore
@@ -0,0 +1 @@
+venv
\ No newline at end of file
diff --git a/client3.py b/client3.py
index 3fc09b7..70b2cd9 100644
--- a/client3.py
+++ b/client3.py
@@ -30,30 +30,39 @@ N = 500
 
 
 def getDataPoint(quote):
-    """ Produce all the needed values to generate a datapoint """
-    """ ------------- Update this function ------------- """
-    stock = quote['stock']
-    bid_price = float(quote['top_bid']['price'])
-    ask_price = float(quote['top_ask']['price'])
-    price = bid_price
+    """Produce all the needed values to generate a datapoint"""
+    stock = quote["stock"]
+    bid_price = float(quote["top_bid"]["price"])
+    ask_price = float(quote["top_ask"]["price"])
+    price = (bid_price + ask_price) / 2
     return stock, bid_price, ask_price, price
 
 
 def getRatio(price_a, price_b):
-    """ Get ratio of price_a and price_b """
-    """ ------------- Update this function ------------- """
-    return 1
+    """Get ratio of price_a and price_b"""
+    try:
+        return price_a / price_b
+    except ZeroDivisionError:
+        raise ZeroDivisionError("Error: Division by zero is not allowed.")
+        return
 
 
 # Main
 if __name__ == "__main__":
     # Query the price once every N seconds.
     for _ in iter(range(N)):
-        quotes = json.loads(urllib.request.urlopen(QUERY.format(random.random())).read())
+        quotes = json.loads(
+            urllib.request.urlopen(QUERY.format(random.random())).read()
+        )
 
         """ ----------- Update to get the ratio --------------- """
+        prices = {}
         for quote in quotes:
             stock, bid_price, ask_price, price = getDataPoint(quote)
-            print("Quoted %s at (bid:%s, ask:%s, price:%s)" % (stock, bid_price, ask_price, price))
+            prices[stock] = price
+            print(
+                "Quoted %s at (bid:%s, ask:%s, price:%s)"
+                % (stock, bid_price, ask_price, price)
+            )
 
-        print("Ratio %s" % getRatio(price, price))
+        print("Ratio %s" % getRatio(prices["ABC"], prices["DEF"]))
-- 
2.39.5 (Apple Git-154)


From 3287d520010b7cac9a6172eaf51e81e6b09a7078 Mon Sep 17 00:00:00 2001
From: Christopher Zimbizi <chriszimbizi@gmail.com>
Date: Thu, 15 Aug 2024 21:12:02 -0500
Subject: [PATCH 2/4] docs: add detailed docstrings for functions to clarify
 inputs and outputs

---
 .gitignore |  3 ++-
 client3.py | 19 ++++++++++++++++---
 2 files changed, 18 insertions(+), 4 deletions(-)

diff --git a/.gitignore b/.gitignore
index f5e96db..8b83d70 100644
--- a/.gitignore
+++ b/.gitignore
@@ -1 +1,2 @@
-venv
\ No newline at end of file
+venv
+guides
\ No newline at end of file
diff --git a/client3.py b/client3.py
index 70b2cd9..5f4125d 100644
--- a/client3.py
+++ b/client3.py
@@ -30,7 +30,14 @@ N = 500
 
 
 def getDataPoint(quote):
-    """Produce all the needed values to generate a datapoint"""
+    """
+    Produce all the needed values to generate a datapoint
+
+    :param quote: The quote to process
+
+    :returns: A tuple with the following values: stock, bid_price, ask_price, price
+    """
+
     stock = quote["stock"]
     bid_price = float(quote["top_bid"]["price"])
     ask_price = float(quote["top_ask"]["price"])
@@ -39,7 +46,14 @@ def getDataPoint(quote):
 
 
 def getRatio(price_a, price_b):
-    """Get ratio of price_a and price_b"""
+    """
+    Get ratio of price_a and price_b
+
+    :param price_a: The first price
+    :param price_b: The second price
+
+    :returns: The ratio of price_a and price_b
+    """
     try:
         return price_a / price_b
     except ZeroDivisionError:
@@ -55,7 +69,6 @@ if __name__ == "__main__":
             urllib.request.urlopen(QUERY.format(random.random())).read()
         )
 
-        """ ----------- Update to get the ratio --------------- """
         prices = {}
         for quote in quotes:
             stock, bid_price, ask_price, price = getDataPoint(quote)
-- 
2.39.5 (Apple Git-154)


From b86c2be3101fa1d77e1c6176280a7bcb166bb765 Mon Sep 17 00:00:00 2001
From: Christopher Zimbizi <chriszimbizi@gmail.com>
Date: Thu, 15 Aug 2024 21:12:24 -0500
Subject: [PATCH 3/4] feat: add unit tests for getRatio; improve existing tests

---
 client_test.py | 56 ++++++++++++++++++++++++++++++++++++++++++++------
 1 file changed, 50 insertions(+), 6 deletions(-)

diff --git a/client_test.py b/client_test.py
index af2bf26..b547d99 100644
--- a/client_test.py
+++ b/client_test.py
@@ -1,23 +1,67 @@
 import unittest
-from client3 import getDataPoint
+from client3 import getDataPoint, getRatio
 
 class ClientTest(unittest.TestCase):
   def test_getDataPoint_calculatePrice(self):
+    """
+    Test the getDataPoint function
+    """
     quotes = [
-      {'top_ask': {'price': 121.2, 'size': 36}, 'timestamp': '2019-02-11 22:06:30.572453', 'top_bid': {'price': 120.48, 'size': 109}, 'id': '0.109974697771', 'stock': 'ABC'},
-      {'top_ask': {'price': 121.68, 'size': 4}, 'timestamp': '2019-02-11 22:06:30.572453', 'top_bid': {'price': 117.87, 'size': 81}, 'id': '0.109974697771', 'stock': 'DEF'}
+      {
+         'top_ask': {'price': 121.2, 'size': 36}, 'timestamp': '2019-02-11 22:06:30.572453', 'top_bid': {'price': 120.48, 'size': 109}, 'id': '0.109974697771', 'stock': 'ABC'
+      },
+      {
+         'top_ask': {'price': 121.68, 'size': 4}, 'timestamp': '2019-02-11 22:06:30.572453', 'top_bid': {'price': 117.87, 'size': 81}, 'id': '0.109974697771', 'stock': 'DEF'
+      }
     ]
-    """ ------------ Add the assertion below ------------ """
+    # assertion
+    for quote in quotes:
+      self.assertEqual(
+        getDataPoint(quote),
+        (
+           quote["stock"],
+           quote["top_bid"]["price"],
+           quote["top_ask"]["price"],
+           (quote["top_bid"]["price"] + quote["top_ask"]["price"]) / 2
+        )
+      )
+
 
   def test_getDataPoint_calculatePriceBidGreaterThanAsk(self):
+    """
+    Test the getDataPoint function with a quote with a bid greater than ask
+    """
     quotes = [
       {'top_ask': {'price': 119.2, 'size': 36}, 'timestamp': '2019-02-11 22:06:30.572453', 'top_bid': {'price': 120.48, 'size': 109}, 'id': '0.109974697771', 'stock': 'ABC'},
       {'top_ask': {'price': 121.68, 'size': 4}, 'timestamp': '2019-02-11 22:06:30.572453', 'top_bid': {'price': 117.87, 'size': 81}, 'id': '0.109974697771', 'stock': 'DEF'}
     ]
-    """ ------------ Add the assertion below ------------ """
+    # assertion
+    for quote in quotes:
+      self.assertEqual(
+        getDataPoint(quote),
+        (
+           quote["stock"],
+           quote["top_bid"]["price"],
+           quote["top_ask"]["price"],
+           (quote["top_bid"]["price"] + quote["top_ask"]["price"]) / 2
+        )
+      )
+
+  def test_getRatio(self):
+      """
+      Test the getRatio function
+      """
+      # assertion
+      self.assertEqual(getRatio(1, 2), 0.5)
+
+  def test_getRatio_zeroDivisionError(self):
+      """
+      Test the getRatio function with a ZeroDivisionError
+      """
+      # assertion
+      self.assertRaises(ZeroDivisionError, getRatio, 1, 0)
 
 
-  """ ------------ Add more unit tests ------------ """
 
 
 
-- 
2.39.5 (Apple Git-154)


From 11f85650f46f49081d4c6178dba272f19e1ecbf0 Mon Sep 17 00:00:00 2001
From: Christopher Zimbizi <chriszimbizi@gmail.com>
Date: Thu, 15 Aug 2024 21:16:01 -0500
Subject: [PATCH 4/4] chore: fix spacing

---
 client_test.py | 3 ---
 1 file changed, 3 deletions(-)

diff --git a/client_test.py b/client_test.py
index b547d99..1e1cd27 100644
--- a/client_test.py
+++ b/client_test.py
@@ -62,8 +62,5 @@ class ClientTest(unittest.TestCase):
       self.assertRaises(ZeroDivisionError, getRatio, 1, 0)
 
 
-
-
-
 if __name__ == '__main__':
     unittest.main()
-- 
2.39.5 (Apple Git-154)

